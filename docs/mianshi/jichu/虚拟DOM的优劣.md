# 你能谈谈虚拟DOM的优劣如何?

## 个人第一次回答

虚拟dom的优点：
- 1.不用去管浏览器创建的那么多的无用的属性
- 2.无需去在乎对dom的操作，只需要管理好对应的状态就好，提升了开发效率。
- 3.会一次性修改掉dom中不一致的部分
- 4.仅对真实dom中不一致的地方进行修改
- 5.尽可能降低重绘重排次数

虚拟dom的缺点：
- 1.不如直接操作dom简便
- 2.更新dom需要去遍历dom tree 并进行dom diff, 然后才能渲染到页面上
- 3.在首次渲染的时候就得去生成整个的dom tree。

## 网答
优点:

- 保证性能下限: 虚拟DOM可以经过diff找出最小差异,然后批量进行patch,这种操作虽然比不上手动优化,但是比起粗暴的DOM操作性能要好很多,因此虚拟DOM可以保证性能下限
- 无需手动操作DOM: 虚拟DOM的diff和patch都是在一次更新中自动进行的,我们无需手动操作DOM,极大提高开发效率
- 跨平台: 虚拟DOM本质上是JavaScript对象,而DOM与平台强相关,相比之下虚拟DOM可以进行更方便地跨平台操作,例如服务器渲染、移动端开发等等

缺点:

- 无法进行极致优化: 在一些性能要求极高的应用中虚拟DOM无法进行针对性的极致优化,比如VScode采用直接手动操作DOM的方式进行极端的性能优化

---

作者：寻找海蓝96

链接：[https://juejin.im/post/5d5f44dae51d4561df7805b4](https://juejin.im/post/5d5f44dae51d4561df7805b4)

来源：掘金

著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

---

## 整理
### 优点
- 保证性能下限: 虚拟DOM可以经过diff找出最小差异,然后批量进行patch,这种操作虽然比不上手动优化,但是比起粗暴的DOM操作性能要好很多,因此虚拟DOM可以保证性能下限
- 无需手动操作DOM: 虚拟DOM的diff和patch都是在一次更新中自动进行的,我们无需手动操作DOM,极大提高开发效率
- 跨平台: 虚拟DOM本质上是JavaScript对象,而DOM与平台强相关,相比之下虚拟DOM可以进行更方便地跨平台操作,例如服务器渲染、移动端开发等等
- 生成的虚拟DOM会比浏览器提供的属性少很多很多，在进行遍历比对时候，效率更高

### 缺点
- 部分场景可能不如直接操作dom简便
- 深层dom的修改，可能会从根结点开始遍历，增加了时间。

### 如何尽可能规避缺点
- 特定情况下自己手动操作dom
- 根据场景选择是否使用虚拟dom
    + 某些场景的 dom diff 算法可以自己写以求达到更高的性能
    + 必要时直接手动操作DOM进行极端的性能优化
- 尽可能避免直接操作深层dom
- 在某些框架下 比如Vue/React等 一定要使用 key 来帮助 dom diff 算法进行处理

--- 

作者：前端小然子

链接：[https://blog.乔田.我爱你/mianshi/jichu/虚拟DOM的优劣.html](https://blog.乔田.我爱你/mianshi/jichu/虚拟DOM的优劣.html)

来源：前端进阶与被虐笔记

著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

---